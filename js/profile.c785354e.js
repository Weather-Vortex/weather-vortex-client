(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{"169a":function(t,e,i){"use strict";var n=i("5530"),a=i("2909"),o=i("ade3"),r=(i("a9e3"),i("498a"),i("caad"),i("2532"),i("d3b7"),i("7db0"),i("368e"),i("480e")),s=i("4ad4"),l=i("b848"),c=i("75eb"),d=i("e707"),u=i("e4d3"),h=i("21be"),v=i("f2e7"),f=i("a293"),m=i("58df"),p=i("d9bd"),g=i("80d2"),b=Object(m["a"])(s["a"],l["a"],c["a"],d["a"],u["a"],h["a"],v["a"]);e["a"]=b.extend({name:"v-dialog",directives:{ClickOutside:f["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200,previousActiveElement:null}},computed:{classes:function(){var t;return t={},Object(o["a"])(t,"v-dialog ".concat(this.contentClass).trim(),!0),Object(o["a"])(t,"v-dialog--active",this.isActive),Object(o["a"])(t,"v-dialog--persistent",this.persistent),Object(o["a"])(t,"v-dialog--fullscreen",this.fullscreen),Object(o["a"])(t,"v-dialog--scrollable",this.scrollable),Object(o["a"])(t,"v-dialog--animated",this.animate),t},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen:function(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(p["e"])("full-width",this)},beforeMount:function(){var t=this;this.$nextTick((function(){t.isBooted=t.isActive,t.isActive&&t.show()}))},beforeDestroy:function(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick:function(){var t=this;this.animate=!1,this.$nextTick((function(){t.animate=!0,window.clearTimeout(t.animateTimeout),t.animateTimeout=window.setTimeout((function(){return t.animate=!1}),150)}))},closeConditional:function(t){var e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):d["a"].options.methods.hideScroll.call(this)},show:function(){var t=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){t.$nextTick((function(){t.previousActiveElement=document.activeElement,t.$refs.content.focus(),t.bind()}))}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(t){if(t.keyCode===g["x"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var e=this.getActivator();this.$nextTick((function(){return e&&e.focus()}))}this.$emit("keydown",t)},onFocusin:function(t){if(t&&this.retainFocus){var e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(t){return t.contains(e)}))){var i=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=Object(a["a"])(i).find((function(t){return!t.hasAttribute("disabled")}));n&&n.focus()}}},genContent:function(){var t=this;return this.showLazyContent((function(){return[t.$createElement(r["a"],{props:{root:!0,light:t.light,dark:t.dark}},[t.$createElement("div",{class:t.contentClasses,attrs:Object(n["a"])({role:"document",tabindex:t.isActive?0:void 0},t.getScopeIdAttrs()),on:{keydown:t.onKeydown},style:{zIndex:t.activeZIndex},ref:"content"},[t.genTransition()])])]}))},genTransition:function(){var t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent:function(){var t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style=Object(n["a"])(Object(n["a"])({},t.style),{},{maxWidth:"none"===this.maxWidth?void 0:Object(g["g"])(this.maxWidth),width:"auto"===this.width?void 0:Object(g["g"])(this.width)})),this.$createElement("div",t,this.getContentSlot())}},render:function(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}})},"1dc9":function(t,e,i){},3292:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-main",{staticClass:"blue lighten-5"},[i("v-container",{attrs:{align:"center",justify:"center"}},[i("v-row",{staticClass:"bg-img",attrs:{justify:"space-around"}},[i("v-col",{attrs:{md:"6","offset-md":"3"}},[i("PrivateUserCard")],1)],1)],1),i("v-container",[i("v-row",{staticClass:"mb-3",attrs:{"no-gutters":""}},[i("v-col",{staticClass:"pa-md-10",attrs:{md:"6",cols:"12"}},[i("PrivateUserControlUnits")],1),i("v-col",{staticClass:"pa-md-10",attrs:{md:"6",cols:"12"}},[i("PrivateUserReviews")],1)],1)],1),i("v-container",[i("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo"},on:{click:function(e){return t.deleteUser()}}},[t._v(" Delete your account! ")])],1)],1)],1)},a=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.stations,"sort-by":"name"},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[t._v("My stations")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),i("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[i("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"indigo",small:"",fab:"",dark:""}},"v-btn",a,!1),n),[i("v-icon",[t._v("mdi-plus")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"text-h5"},[t._v(t._s(t.editFormTitle))])]),i("v-card-text",[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"6"}},[i("v-text-field",{attrs:{label:"Station name"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),i("v-col",{attrs:{cols:"12",sm:"6"}},[i("v-text-field",{attrs:{label:"Position"},model:{value:t.editedItem.position.locality,callback:function(e){t.$set(t.editedItem.position,"locality",e)},expression:"editedItem.position.locality"}})],1)],1),i("v-row",[i("v-col",{attrs:{cols:"12",sm:"6"}},[i("v-text-field",{attrs:{label:"Auth Key",rules:t.validateAuthKey},model:{value:t.editedItem.authkey,callback:function(e){t.$set(t.editedItem,"authkey",e)},expression:"editedItem.authkey"}})],1),i("v-col",{attrs:{cols:"12",sm:"6"}},[i("v-text-field",{attrs:{label:"Station url",rules:t.validateUrl},model:{value:t.editedItem.url,callback:function(e){t.$set(t.editedItem,"url",e)},expression:"editedItem.url"}})],1)],1),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("small",[t._v("Your auth key will be unmodificable after save. You will not be able to retrieve it. ")])])],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),i("v-dialog",{attrs:{transition:"dialog-bottom-transition",width:"500"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[i("v-card",[i("v-card-title",{staticClass:"text-h5"},[t._v(" Are you sure you want to delete this station? ")]),i("v-card-text",[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("small",[t._v("You will not be able to retrieve it after confirm. ")])])],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v(" No ")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v(" Yes ")]),i("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-icon",{staticClass:"mr-2",on:{click:function(e){return t.editItem(n)}}},[t._v(" mdi-pencil ")]),i("v-icon",{on:{click:function(e){return t.deleteItem(n)}}},[t._v(" mdi-delete ")])]}}],null,!0)})},r=[],s=(i("ac1f"),i("00b4"),i("99af"),i("d81d"),i("b0c0"),i("e9c4"),i("a434"),"https://weather-vortex-server.herokuapp.com"),l={data:function(){return{dialog:!1,dialogDelete:!1,headers:[{text:"Station Name",align:"start",value:"name"},{text:"Position",value:"position.locality"},{text:"Url",value:"url"},{text:"Actions",value:"actions",sortable:!1}],stations:[],editedIndex:-1,editedItem:{name:"",position:{locality:""},authkey:"",url:""},defaultItem:{name:"",position:{locality:""},authkey:"",url:""},valid:null,validateUrl:[function(t){return/^(ftp|http|https):\/\/[^ "]+$/.test(t)||"Url value not valid"}]}},computed:{editFormTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},validateAuthKey:function(){return-1===this.editedIndex?[function(t){return 32===(null===t||void 0===t?void 0:t.length)||"Authkey must have exactly 32 characters"}]:[function(t){return!t||0===(null===t||void 0===t?void 0:t.length)||32===(null===t||void 0===t?void 0:t.length)||"Authkey must have exactly 0 (don't modify) or 32 characters"}]}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){var t=this,e=this.$store.getters.getId;console.log("User: "+e);var i="".concat(s,"/users/").concat(e,"/stations");this.$http.get(i).then((function(e){t.stations=e.data.stations,t.nameS=t.stations.map((function(t){return t.name})),t.id=t.stations.map((function(t){return t._id})),t.stations=t.stations.map((function(t){var e=t._id,i=t.name,n=t.authKey,a=t.position.locality,o=t.url;return t._id=e,t.name=i,t.authKey=n,t.position.locality=a,t.url=o,console.log("mapped is mapped "+t,e,n),t}))})).catch((function(t){console.error(t.data)})),this.initialize()},methods:{initialize:function(){this.stations=[]},editItem:function(t){this.editedIndex=this.stations.indexOf(t),this.editedItem=JSON.parse(JSON.stringify(t)),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.stations.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){var t=this,e="".concat(s,"/stations/").concat(this.editedItem._id);this.$http.delete(e,{withCredentials:!0}).then((function(e){e.data&&t.stations.splice(t.editedIndex,1)})).catch((function(t){console.error(t.data)})),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=JSON.parse(JSON.stringify(t.defaultItem)),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},updateStation:function(){var t=this;console.log("Sto id?"+this.editedItem._id);var e="".concat(s,"/stations/").concat(this.editedItem._id),i={name:this.editedItem.name,position:this.editedItem.position,url:this.editedItem.url};console.log("Contenuto: ",i),this.$http.put(e,i,{withCredentials:!0}).then((function(e){e.data&&t.$alert("Data updated correctly.","Edit","success").then((function(){t.name=e.data.name}))})).catch((function(e){var i="<strong>Update</strong>&nbsp;error";t.$alert("Update station error",i,"error"),console.error("error, ",e)})),Object.assign(this.stations[this.editedIndex],this.editedItem)},createStation:function(){var t=this,e="".concat(s,"/stations");console.log("Current edit item:",this.editedItem);var i={authKey:this.editedItem.authkey,name:this.editedItem.name,position:this.editedItem.position,url:this.editedItem.url};this.$http.post(e,i,{withCredentials:!0}).then((function(e){e.data&&t.$alert("Station added correctly, enjoy our service!","Create Station","success").then((function(){i._id=e.data.saved._id,t.stations.push(i)}))})).catch((function(e){console.error(e);var i="<strong>Create</strong>&nbsp;error",n=e.response.data,a="";if(n&&n.error&&n.error.internalError&&n.error.internalError.code)switch(n.error.internalError.code){case 11e3:a="Another station with the same name alreay exists in database. Choose another identifier for your station.";break;default:a="Unknown server error.";break}else a="Unknown error.";t.$alert(a,i,"error")}))},save:function(){this.$refs.form.validate()?(this.editedIndex>-1?this.updateStation():this.createStation(),this.close()):this.$alert("Invalid form, check fields","Error","error")}}},c=l,d=(i("d092"),i("2877")),u=i("6544"),h=i.n(u),v=i("8336"),f=i("b0af"),m=i("99d9"),p=i("62ad"),g=i("a523"),b=i("8fea"),w=i("169a"),x=i("ce7e"),k=i("4bd4"),y=i("132d"),I=i("0fd9"),_=i("2fa4"),C=i("8654"),$=i("71d9"),V=i("2a7f"),O=Object(d["a"])(c,o,r,!1,null,null,null),A=O.exports;h()(O,{VBtn:v["a"],VCard:f["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VCol:p["a"],VContainer:g["a"],VDataTable:b["a"],VDialog:w["a"],VDivider:x["a"],VForm:k["a"],VIcon:y["a"],VRow:I["a"],VSpacer:_["a"],VTextField:C["a"],VToolbar:$["a"],VToolbarTitle:V["a"]});var D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.reviews,"sort-by":"reviews"},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[t._v("My feedbacks")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),[i("v-btn",{staticClass:"mb-2",attrs:{small:"",fab:"",dark:"",color:"indigo"},on:{click:function(e){return t.goTo()}}},[i("v-icon",[t._v("mdi-chevron-right")])],1)],i("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[i("v-card",[i("v-card-title",{staticClass:"text-h5"},[t._v("Are you sure you want to delete this item?")]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),i("v-spacer")],1)],1)],1)],2)]},proxy:!0},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-icon",{on:{click:function(e){return t.deleteItem(n)}}},[t._v(" mdi-delete ")]),i("v-icon",{on:{click:function(e){return t.goTo()}}},[t._v(" mdi-chevron-right ")])]}}],null,!0)})},P=[],T=(i("a4d3"),i("e01a"),{data:function(){return{dialog:!1,dialogDelete:!1,headers:[{text:"Provider",align:"start",sortable:!0,value:"providers"},{text:"Vote",value:"ratings"},{text:"Comment",value:"descriptions"},{text:"Actions",value:"actions",sortable:!1}],reviews:[],editedIndex:-1,editedItem:{providers:"",ratings:0,descriptions:""},defaultItem:{providers:"",ratings:0,descriptions:""}}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){var t=this,e="https://weather-vortex-server.herokuapp.com",i=this.$store.getters.getId;console.log("User: "+i);var n="".concat(e,"/users/").concat(i,"/feedbacks");this.$http.get(n).then((function(e){t.feedbacks=e.data.feedbacks,t.ratings=t.feedbacks.map((function(t){return t.rating})),t.providers=t.feedbacks.map((function(t){return t.provider.name})),t.descriptions=t.feedbacks.map((function(t){return t.description})),t.id=t.feedbacks.map((function(t){return t._id})),console.log("Feedbacks id are: "+t.id),t.reviews=t.feedbacks.map((function(t){var e=t._id,i=t.provider.name,n=t.rating,a=t.description;return t.feedId=e,t.providers=i,t.ratings=n,t.descriptions=a,t})),console.log(" All ratings: "+t.providers+", All providers: "+t.providers+", All descriptions: "+t.descriptions)})).catch((function(t){console.error(t.data)})),this.initialize()},methods:{initialize:function(){this.reviews=[]},deleteItem:function(t){var e=this,i="https://weather-vortex-server.herokuapp.com";this.editedIndex=this.reviews.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0;var n="".concat(i,"/feedbacks/").concat(this.editedItem.feedId);this.$http.delete(n,{withCredentials:!0}).then((function(t){e.feedbacks=t.data.feedbacks})).catch((function(t){console.error(t.data)}))},deleteItemConfirm:function(){this.reviews.splice(this.editedIndex,1),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},goTo:function(){this.$router.push("/feedbacks/")}}}),S=T,E=Object(d["a"])(S,D,P,!1,null,null,null),j=E.exports;h()(E,{VBtn:v["a"],VCard:f["a"],VCardActions:m["a"],VCardTitle:m["d"],VDataTable:b["a"],VDialog:w["a"],VDivider:x["a"],VIcon:y["a"],VSpacer:_["a"],VToolbar:$["a"],VToolbarTitle:V["a"]});var B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"blue lighten-5",attrs:{width:"400"}},[n("v-img",{attrs:{height:"200px",src:i("9e55")}},[n("v-app-bar",{staticClass:"mt-8",attrs:{flat:"",color:"rgba(0, 0, 0, 0)"}},[n("v-avatar",{attrs:{size:"100"}},[n("img",{attrs:{alt:"user",src:i("c121")}})])],1),n("v-card-title",{staticClass:"white--text mt-8"},[n("h3",{staticClass:"font-weight-bold ml-3"},[t._v(" ["+t._s(this.userInit)+"] "+t._s(this.lastName)+" "+t._s(this.firstName)+" ")])])],1),n("v-card-text",[n("div",{staticClass:"font-weight-bold ml-8 mb-2"},[t._v("Details")]),n("v-list",{staticClass:"blue lighten-5",attrs:{"two-line":""}},[n("v-list-item",[n("v-list-item-icon",[n("v-icon",{attrs:{color:"indigo"}},[t._v(" mdi-email ")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(this.email))]),n("v-list-item-subtitle",[t._v("Personal Email")])],1)],1),n("v-list-item",[n("v-list-item-icon",[n("v-icon",{attrs:{color:"indigo"}},[t._v(" mdi-timetable ")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(this.creationDate))]),n("v-list-item-subtitle",[t._v("Registration Date")])],1)],1),n("v-divider",{attrs:{inset:""}}),n("v-list-item",[n("v-list-item-icon",[n("v-icon",{attrs:{color:"indigo"}},[t._v(" mdi-lock ")])],1),n("v-list-item-content",[n("v-list-item-title",[n("v-text-field",{attrs:{type:"password",disabled:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("v-list-item-subtitle",[t._v("Password")])],1)],1),n("v-divider",{attrs:{inset:""}}),n("v-list-item",[n("v-list-item-icon",[n("v-icon",{attrs:{color:"indigo"}},[t._v(" mdi-map-marker-radius ")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(this.preferred))]),n("v-list-item-subtitle",[t._v("Preferred Position")])],1)],1)],1),n("v-container",[n("EditDialog",{attrs:{preferred:this.preferred},on:{"preferred-updated":t.onPreferredUpdated}})],1)],1)],1)},U=[],N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{attrs:{justify:"center"}},[i("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[i("v-btn",t._g(t._b({attrs:{color:"blue",outlined:"",dark:""}},"v-btn",a,!1),n),[i("v-icon",[t._v(" mdi-pencil ")]),t._v(" Edit ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-form",{ref:"form",attrs:{"lazy-validation":""}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"text-h5"},[t._v("Edit your information")])]),i("v-card-text",[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"6"}},[i("v-text-field",{attrs:{tabindex:"1","append-icon":t.show1?"mdi-eye":"mdi-eye-off",type:t.show1?"text":"password",rules:t.passwordRules.concat(t.validateLength),label:"Password","prepend-inner-icon":"mdi-lock"},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),i("v-col",{attrs:{cols:"12",sm:"6"}},[i("v-text-field",{attrs:{tabindex:"2",rules:t.passwordRules.concat(t.validatePassword2).concat(t.validateLength),"append-icon":t.show2?"mdi-eye":"mdi-eye-off",type:t.show2?"text":"password",label:"Re-type Password","prepend-inner-icon":"mdi-lock"},on:{"click:append":function(e){t.show2=!t.show2}},model:{value:t.retypepassword,callback:function(e){t.retypepassword=e},expression:"retypepassword"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{tabindex:"3",label:"Position Preferred","prepend-inner-icon":"mdi-map-marker"},model:{value:t.editPreferred,callback:function(e){t.editPreferred=e},expression:"editPreferred"}})],1)],1),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("small",[t._v("Save your preferred position to receive every days in your email inbox daily forecasts!")])])],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Close ")]),i("v-btn",{attrs:{color:"success",text:""},on:{click:function(e){return t.updateUser()}}},[t._v(" Save ")])],1)],1)],1)],1)],1)},F=[],L={props:{preferred:String},data:function(){return{show1:!1,show2:!1,dialog:!1,password:"",retypepassword:"",editPreferred:this.$props.preferred,passwordRules:[function(t){return/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/.test(t)||0===(null===t||void 0===t?void 0:t.length)||"Password must contain at least lowercase letter, one number, a special character and one uppercase letter"}]}},methods:{validatePassword2:function(t){return t===this.password||"Passwords don't match."},validateLength:function(t){return t.length>8||0===(null===t||void 0===t?void 0:t.length)||"Password must have more than 8 characters"},updateUser:function(){var t=this,e="https://weather-vortex-server.herokuapp.com",i="".concat(e,"/auth/"),n={password:this.password,preferred:this.editPreferred};this.$http.put(i,n,{withCredentials:!0}).then((function(e){e.data.user&&t.$alert("Data updated correctly.","Edit","success").then((function(){console.log(t.editPreferred,e.data.user.preferred),t.$emit("preferred-updated",t.editPreferred),t.dialog=!1}))})).catch((function(e){var i="<strong>Update</strong>&nbsp;error";t.$alert("Update user error",i,"success:false"),console.error(e.data)}))}}},z=L,R=Object(d["a"])(z,N,F,!1,null,null,null),K=R.exports;h()(R,{VBtn:v["a"],VCard:f["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VCol:p["a"],VContainer:g["a"],VDialog:w["a"],VForm:k["a"],VIcon:y["a"],VRow:I["a"],VSpacer:_["a"],VTextField:C["a"]});var M={components:{EditDialog:K},name:"privateProfileCard",computed:{userInit:function(){return this.$store.getters.initials},firstName:function(){return this.profile?this.profile.firstName:""},lastName:function(){return this.profile?this.profile.lastName:""},email:function(){return this.profile?this.profile.email:""},creationDate:function(){return this.profile?this.profile.createdDate:""},preferred:function(){var t;if(this.profile&&this.profile.preferred){if(this.profile.preferred.location)return console.log("Preferred location:",this.profile.preferred.location),this.profile.preferred.location;if(this.profile.preferred.position&&this.profile.preferred.position.x&&this.profile.preferred.position.y){console.log("Preferred position:",this.profile.preferred.position);var e=this.profile.preferred.position,i=e.x,n=e.y;return"X:".concat(i,", Y:").concat(n)}}return console.log("Preferred nothing:",null===(t=this.profile)||void 0===t?void 0:t.preferred),""}},data:function(){return{password:"Password",toggleDisable:!1,show2:!1,profile:null}},mounted:function(){this.getProfile()},methods:{getProfile:function(){var t=this,e=this.$store.getters.isAuthenticated;console.log("IsAuth:",e),e||this.$alert("Missing authentication info.").then((function(){return t.$router.push("/user/login")}));var i="https://weather-vortex-server.herokuapp.com",n="".concat(i,"/auth/profile");this.$http.get(n,{withCredentials:!0}).then((function(e){e.data&&(t.profile=e.data)})).catch((function(e){switch(e.response.status){case 400:t.$alert("Error!");break;case 401:t.$alert("Missing authentication info.").then((function(){return t.$router.push("/user/login")})),console.log(e.response);break}}))},onPreferredUpdated:function(t){console.log("Preferred updated:",t),this.profile.preferred.location=t}}},Z=M,J=i("40dc"),Y=i("8212"),W=i("adda"),q=i("8860"),X=i("da13"),G=i("5d23"),H=i("34c3"),Q=Object(d["a"])(Z,B,U,!1,null,null,null),tt=Q.exports;h()(Q,{VAppBar:J["a"],VAvatar:Y["a"],VCard:f["a"],VCardText:m["c"],VCardTitle:m["d"],VContainer:g["a"],VDivider:x["a"],VIcon:y["a"],VImg:W["a"],VList:q["a"],VListItem:X["a"],VListItemContent:G["a"],VListItemIcon:H["a"],VListItemSubtitle:G["b"],VListItemTitle:G["c"],VTextField:C["a"]});var et={name:"privateProfile",components:{PrivateUserControlUnits:A,PrivateUserReviews:j,PrivateUserCard:tt},data:function(){return{}},methods:{deleteUser:function(){var t=this,e="https://weather-vortex-server.herokuapp.com",i="".concat(e,"/auth/");this.$confirm("Are you sure to delete your account?").then((function(){t.$http.delete(i,{withCredentials:!0}).then((function(){t.$cookies.remove("auth"),t.$store.commit("logout"),t.$router.push("/")})).catch((function(t){console.log(t)}))}))}}},it=et,nt=(i("bbc4"),i("7496")),at=i("f6c4"),ot=Object(d["a"])(it,n,a,!1,null,null,null);e["default"]=ot.exports;h()(ot,{VApp:nt["a"],VBtn:v["a"],VCol:p["a"],VContainer:g["a"],VMain:at["a"],VRow:I["a"]})},"368e":function(t,e,i){},"4bd4":function(t,e,i){"use strict";var n=i("5530"),a=(i("caad"),i("2532"),i("07ac"),i("4de4"),i("d3b7"),i("159b"),i("7db0"),i("58df")),o=i("7e2b"),r=i("3206");e["a"]=Object(a["a"])(o["a"],Object(r["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,i=function(t){return t.$watch("hasError",(function(i){e.$set(e.errorBag,t._uid,i)}),{immediate:!0})},n={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?n.shouldValidate=t.$watch("shouldValidate",(function(a){a&&(e.errorBag.hasOwnProperty(t._uid)||(n.valid=i(t)))})):n.valid=i(t),n},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var i=this.watchers.find((function(t){return t._uid===e._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(n["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},"799e":function(t,e,i){},bbc4:function(t,e,i){"use strict";i("799e")},d092:function(t,e,i){"use strict";i("1dc9")}}]);
//# sourceMappingURL=profile.c785354e.js.map